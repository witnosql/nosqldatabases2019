<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../index.html">  Installing and Testing MongoDB  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Install MongoDB">
          Install MongoDB
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="https://witnosql.github.io/nosqldatabases2019//topic-01-install/book-a/index.html">Install MongoDB </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Install MongoDB">
            <h1>Objectives</h1>
<p>In this lab, we will install and test MongoDB, a non-relational database.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>MongoDB installation</h1>
<p>MongoDB is a non-relational database that stores data in flexible, JSON-like documents, meaning fields can vary from document to document and data structure can be changed over time. In this lab, we will download and install MongoDB and create a test document.</p>
<p>Go to <a href="https://www.mongodb.com/download-center/community" target="_ blank"><code>https://www.mongodb.com/download-center/community</code></a> and select the correct installer for your operating system.</p>
<p><img src="img/download.png" alt=""></p>
<p>Once the installer has downloaded, run it. Choose the following options during installation:</p>
<ul>
<li>Accept the license terms and agreement</li>
<li>Choose <em>complete</em> as the setup type, to install all features</li>
<li>Under Service Configuration, the &quot;Install MongoD as a service&quot; option should stay checked</li>
<li><strong>Uncheck</strong> the Install MongoDB Compass option. (MongoDB Compass is a graphical user interface for MongoDB; we will use the console for our commands. Compass causes installation to hang on some operating systems, so uncheck for now; it can be installed separately later if you wish to try it out).</li>
<li>Click Install to begin the installation.</li>
</ul>
<p>To confirm that MongoDB has installed successfully, go to the install location (probably <code>C:\Program Files\MongoDB\</code>, or the equivalent location on your system). You should see a MongoDB folder. Go to the <code>Server\4.0\bin</code> folder and view the files there.</p>
<p><img src="img/installed.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Getting started with MongoDB</h1>
<p>Now, we will take the first steps in starting to use MongoDB. We need to first create a storage location, and then start the Mongo server and client processes from the command prompt.</p>
<h2>Create storage location for MongoDB</h2>
<p>Open a command prompt (your regular system command prompt, not the Mongo shell) and run the following commands to create a folder on your C: drive called <code>db</code> inside a folder called <code>data</code>. This location is where MongoDB will store your data files.</p>
<pre><code>c:\
md data
md data\db</code></pre>
<p><img src="img/md.png" alt=""></p>
<p>You should now see a folder on your C: drive called <code>data\db</code>. Note that this step only needs to be done the first time you use MongoDB.</p>
<p><img src="img/datadbfolder.png" alt=""></p>
<h2>Start server and client processes</h2>
<p>Next, we will start the MongoDB server and client processes. We will need to start both of these processes <em>every</em> time we use MongoDB. <code>mongod.exe</code> is the Mongo Server process, and <code>mongo.exe</code> is the client process.</p>
<h3>Start mongod.exe (server)</h3>
<ul>
<li>In your command prompt, navigate to the bin folder within the command prompt. The location is probably something like <code>C:\Program Files\MongoDB\Server\4.0\bin</code>.</li>
</ul>
<p><img src="img/binfolder.png" alt=""></p>
<ul>
<li>Now enter the command <code>mongod.exe</code>. This starts the MongoD application, which is the database server.</li>
</ul>
<p><img src="img/mongod.png" alt=""></p>
<p>You should see something like this when MongoD is running. Note the part that says &quot;waiting for connections&quot;; this indicates our database server is running and waiting for users to connect to it. We will need to leave this command prompt open and running MongoD for the entire time that we are using the MongoDB database.  </p>
<p><img src="img/mongodrunning.png" alt=""></p>
<h3>Start mongo.exe (client)</h3>
<ul>
<li>Open a <strong>new</strong> command prompt. Remember to leave the other one open too.</li>
<li>Once again, navigate to the <code>C:\Program Files\MongoDB\Server\4.0\bin</code> folder.</li>
<li>Then, enter the command <code>mongo.exe</code>; this will start the Mongo client process.</li>
</ul>
<p><img src="img/mongo.png" alt=""></p>
<p>When Mongo has started, you will see something like the following. You should see a blinking cursor at the prompt, indicating that it is ready for commands.</p>
<p><img src="img/mongorunning.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Creating your first document</h1>
<p>We will delve into the CRUD (Create, Read, Update and Delete) functions in MongoDB in more detail next week. This week, we will create a very simple document and then use find() to retrieve it.</p>
<ul>
<li>Use the <code>show dbs</code> command to list the databases currently held in the MongoDB system.</li>
</ul>
<p><img src="img/showdbs.png" alt=""></p>
<h2>Create</h2>
<ul>
<li>The <code>use test</code> command will switch to the test database if it exists already or create it if it doesn&#39;t exist; so in this instance, running the use test command both creates a database called &quot;test&quot; and switches to that database.</li>
</ul>
<p><img src="img/usetest.png" alt=""></p>
<ul>
<li>We will now create our first document in MongoDB. This is a sample document with a range of different datatypes used:</li>
</ul>
<pre><code>db.test.insert(
    {
        item: &quot;box&quot;,
        qty: 20,
        price: 14.99,
        available: true,
        timestamp: new Date(),
        itemcodes: [1002, 1003, 1004],
        supplierinfo: { name: &quot;Boxes Inc.&quot;, location: &quot;Ireland&quot; }
    }
)</code></pre>
<p>When a document has been inserted successfully, you will see the following output:</p>
<p><img src="img/inserted.png" alt=""></p>
<h2>Read</h2>
<p>To read from a MongoDB database, the find() operation is used. To find the document we just created, use the following:</p>
<pre><code>db.test.find()</code></pre>
<p>This prints the document, although it&#39;s not very readable. MongoDB supports <em>chaining</em> of functions (meaning we can call multiple operations at the same time). The pretty() function produces more readable results.</p>
<pre><code>db.test.find().pretty()</code></pre>
<p><img src="img/findpretty.png" alt=""></p>
<p>We can now see the document we created, along with the timestamp that was assigned to it when we called the Date() function and the ObjectId that MongoDB assigned to it.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Shutting down the processes</h1>
<p>It&#39;s a good idea to shut down the processes correctly each time you&#39;ve finished using MongoDB; don&#39;t just close the command prompt windows when you&#39;re done. Shutting down correctly ensures that your data has been committed and saved.</p>
<h2>Shut down mongo.exe</h2>
<p>In the mongo.exe window, type &#39;exit&#39; to shut down the process. It will, very politely, say &#39;bye&#39; and then it&#39;s safe to close the window.</p>
<p><img src="img/bye.png" alt=""></p>
<h2>Shut down mongod.exe</h2>
<p>In the mongod.exe window, use the <code>CTRL + C</code> command to shut down. When you see this output and it returns to the command prompt, it&#39;s safe to close the window. </p>
<p><img src="img/ctrlc.png" alt=""></p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>